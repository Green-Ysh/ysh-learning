---
title: JavaScript åŸºç¡€
date: 2025-03-14 14:51:34
categories:
  - JavaScript
tags:
  - JavaScript
---

## 1.1 JavaScript ç®€ä»‹

JavaScript æ˜¯ä¸€ç§è½»é‡çº§çš„è„šæœ¬è¯­è¨€ï¼Œä¸»è¦ç”¨äº Web å¼€å‘ï¼Œå¯ä»¥ç”¨äºå‰ç«¯å’Œåç«¯å¼€å‘ã€‚å…¶è¯­æ³•å¾ˆå¤§ç¨‹åº¦ä¸Šå€Ÿé‰´äº† C è¯­è¨€å’Œå…¶ä»–ç±» C è¯­è¨€ï¼Œå¦‚ Javaã€Perlã€C++ç­‰ã€‚

## 1.2 æ ‡è¯†ç¬¦

- JavaScript çš„æ ‡è¯†ç¬¦ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œç¾å…ƒç¬¦å·ç»„æˆï¼Œä¸”å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ã€‚
- å»ºè®®ä½¿ç”¨é©¼å³°å¤§å°å†™å½¢å¼å‘½åæ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ `myVariable`ã€‚
- æ ‡è¯†ç¬¦åŒºåˆ†å¤§å°å†™ï¼Œ`myVariable` å’Œ `myvariable` æ˜¯ä¸åŒçš„æ ‡è¯†ç¬¦ã€‚
- æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯ JavaScript çš„ä¿ç•™å­—ï¼Œå¦‚ `class`ã€`function` ç­‰ã€‚

## 1.3 æ³¨é‡Š

- JavaScript æ”¯æŒå•è¡Œæ³¨é‡Šï¼Œä½¿ç”¨ `//`ã€‚
- JavaScript æ”¯æŒå¤šè¡Œæ³¨é‡Šï¼Œä½¿ç”¨ `/* ... */`ã€‚

```javascript
// è¿™æ˜¯å•è¡Œæ³¨é‡Š
/* è¿™æ˜¯
   å¤šè¡Œæ³¨é‡Š */
```

## 1.4 ä¸¥æ ¼æ¨¡å¼

- ECMAScript 5 å¼•å…¥äº†ä¸¥æ ¼æ¨¡å¼
- JavaScript ä¸¥æ ¼æ¨¡å¼æ˜¯ä¸€ç§æ›´ä¸¥æ ¼çš„ JavaScript è¯­æ³•ï¼Œå¯ä»¥é¿å…ä¸€äº›å¸¸è§çš„é”™è¯¯ã€‚
- ä¸¥æ ¼æ¨¡å¼é€šè¿‡åœ¨è„šæœ¬æˆ–å‡½æ•°çš„å¼€å¤´æ·»åŠ  `"use strict"` æ¥å¯ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨ `"use strict"` æ¥å¯ç”¨ã€‚
- ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå˜é‡å¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
- ES6 æ¨¡å—å’Œç±»é»˜è®¤å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸éœ€è¦æ˜¾å¼å¯ç”¨ã€‚
- Webpackã€Babel ç­‰å·¥å…·é»˜è®¤å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸éœ€è¦æ˜¾å¼å¯ç”¨ã€‚

```javascript
// å…¨å±€å¯ç”¨ä¸¥æ ¼æ¨¡å¼
"use strict";

// å±€éƒ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼
function strictMode() {
  "use strict";
}
```

## 1.5 è¯­å¥

- JavaScript è¯­å¥æ˜¯æ‰§è¡Œçš„ä»£ç ï¼Œä»¥åˆ†å· `;` ç»“æŸã€‚
- è¯­å¥å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥æˆç»„å­˜åœ¨ã€‚
- å¤šæ¡è¯­å¥å¯ä»¥æˆç»„å­˜åœ¨ï¼Œæˆç»„çš„è¯­å¥ç”¨å¤§æ‹¬å· `{}` åŒ…å›´ï¼Œä¾‹å¦‚ `if` è¯­å¥ã€‚
- å¤§æ‹¬å· `{}` æ—¢å¯ä»¥ç”¨äºæˆç»„è¯­å¥ï¼Œä¹Ÿå¯ä»¥ç”¨äºå®šä¹‰å¯¹è±¡ã€å‡½æ•°ç­‰ã€‚

```javascript
// å•ç‹¬çš„è¯­å¥
console.log("Hello, World!");

// if è¯­å¥
if (true) {
  console.log("Hello, World!");
}

//å¯¹è±¡
const myObject = {
  name: "John",
  age: 30,
};

// å‡½æ•°
function myFunction() {
  console.log("Hello, World!");
}
```

## 1.6 å…³é”®å­— ä¿ç•™å­—

- JavaScript çš„å…³é”®å­—æ˜¯ä¿ç•™å­—ï¼Œä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ã€‚
- ä¿ç•™å­—æ˜¯ JavaScript ä¿ç•™ç»™å°†æ¥ä½œå…³é”®å­—çš„ï¼Œä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ã€‚

```javascript
// ECMA-262 è§„å®šçš„æ‰€æœ‰å…³é”®å­—å¦‚ä¸‹
/*
new
with
this
void
super
yield
await 
delete
import
in for
switch
typeof
finally
if else
do while 
debugger
try catch 
instanceof
default export extends
var let const class function
break case continue return throw
*/

// ECMA-262 è§„å®šçš„æ‰€æœ‰ä¿ç•™å­—å¦‚ä¸‹
/*
å§‹ç»ˆä¿ç•™
enum

ä¸¥æ ¼æ¨¡å¼ä¸‹ä¿ç•™
arguments eval implements interface package private protected public static
*/
```

## 1.7 å˜é‡

- å˜é‡æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚
- å˜é‡çš„å£°æ˜ä½¿ç”¨ `var`ã€`let`ã€`const` å…³é”®å­—ã€‚
- `var` æ˜¯ ES5 å¼•å…¥çš„å˜é‡å£°æ˜æ–¹å¼ï¼Œ`let` å’Œ `const` æ˜¯ ES6 å¼•å…¥çš„å˜é‡å£°æ˜æ–¹å¼ã€‚
- `var` å£°æ˜çš„å˜é‡å…·æœ‰å˜é‡æå‡ï¼ˆhoistingï¼‰çš„ç‰¹æ€§ï¼Œ`let` å’Œ `const` å£°æ˜çš„å˜é‡åˆ™æ²¡æœ‰ã€‚
- `let` æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal dead zoneï¼‰ï¼šåœ¨ `let` å£°æ˜çš„å˜é‡è¢«èµ‹å€¼ä¹‹å‰ï¼Œè®¿é—®è¯¥å˜é‡ä¼šæŠ¥é”™ã€‚
- `let` å…¨å±€å£°æ˜ä¸ `var` å…¨å±€å£°æ˜çš„åŒºåˆ«ï¼š`let` å£°æ˜çš„å˜é‡ä¸ä¼šæˆä¸º Window å¯¹è±¡çš„å±æ€§ã€‚
- `const` å£°æ˜çš„å˜é‡æ˜¯å¸¸é‡ï¼Œå¿…é¡»åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¸”ä¸èƒ½é‡æ–°èµ‹å€¼ã€‚

**PSï¼šä½¿ç”¨ `let`ï¼ˆES6/ES2015 å¼•å…¥ï¼‰åœ¨å…¨å±€ä½œç”¨åŸŸå£°æ˜çš„å˜é‡ä¸ä¼šæˆä¸º Window å¯¹è±¡çš„å±æ€§ã€‚è¿™æ˜¯å› ä¸ºï¼š**

- ä¸åŒçš„ä½œç”¨åŸŸæœºåˆ¶ï¼š`let` ä½¿ç”¨å—çº§ä½œç”¨åŸŸè€Œä¸æ˜¯å‡½æ•°ä½œç”¨åŸŸï¼ŒJavaScript å¯¹å…¨å±€ `let` å£°æ˜çš„å¤„ç†æ–¹å¼ä¸åŒã€‚
- ES6 è§„èŒƒè®¾è®¡ï¼šè¿™æ˜¯ ECMAScript 6 è§„èŒƒä¸­çš„ä¸€ä¸ªæœ‰æ„è®¾è®¡å†³å®šï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºå…¨å±€ä½œç”¨åŸŸå’Œ Window å¯¹è±¡ä¹‹é—´æ›´æ¸…æ™°çš„åˆ†ç¦»ã€‚
- è¯æ³•ç¯å¢ƒï¼šä½¿ç”¨ `let` å£°æ˜çš„å˜é‡å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯æ³•ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªç¯å¢ƒä½äºå…¨å±€å¯¹è±¡çš„"å‰é¢"ï¼Œè€Œä¸æ˜¯ç›´æ¥æ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­ã€‚å› ä¸º Window å¯¹è±¡é‡Œå·²ç»æœ‰å¾ˆå¤šæµè§ˆå™¨è‡ªå¸¦çš„å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœæ‰€æœ‰å…¨å±€å˜é‡éƒ½å¾€é‡Œé¢å¡ï¼Œå¾ˆå®¹æ˜“ä¸å°å¿ƒè¦†ç›–äº†é‡è¦çš„å±æ€§ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ ç”¨ var name = "æˆ‘çš„åå­—"ï¼Œå°±ä¼šè¦†ç›–æµè§ˆå™¨åŸæœ¬çš„ window.name å±æ€§ã€‚

```javascript
// var å£°æ˜çš„å˜é‡ä¼šæˆä¸º Window å¯¹è±¡çš„å±æ€§
var name = "John";
console.log(window.name); // "John"

// let å£°æ˜çš„å˜é‡ä¸ä¼šæˆä¸º Window å¯¹è±¡çš„å±æ€§
let age = 30;
console.log(window.age); // undefined

// const å£°æ˜çš„å˜é‡ä¸ä¼šæˆä¸º Window å¯¹è±¡çš„å±æ€§
const city = "New York";
console.log(window.city); // undefined
```

## 1.8 æ•°æ®ç±»å‹

- JavaScript çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼‰ï¼ŒECMAScript ä¸èƒ½å®šä¹‰æ–°çš„æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰å€¼éƒ½å¯ä»¥ç”¨ä¸¤å¤§ç±»æ•°æ®ç±»å‹æ¥è¡¨ç¤ºã€‚
- åŸºæœ¬æ•°æ®ç±»å‹ï¼š`Number`ã€`String`ã€`Boolean`ã€`Null`ã€`Undefined`ã€`Symbol`ï¼ˆES6 å¼•å…¥ï¼‰å’Œ `BigInt`ï¼ˆES2020 å¼•å…¥ï¼‰ã€‚
- å¼•ç”¨æ•°æ®ç±»å‹ï¼š`Object`ï¼Œæ˜¯ä¸€ä¸ªæ— åºçš„ã€å¯å˜çš„ã€å¯åµŒå¥—çš„é”®å€¼å¯¹é›†åˆã€‚
- æ‰€æœ‰å€¼éƒ½å¯ä»¥ç”¨ `typeof` æ“ä½œç¬¦æ¥åˆ¤æ–­ã€‚

```javascript
// åŸºæœ¬æ•°æ®ç±»å‹
console.log(typeof 123); // "number"
console.log(typeof "Hello"); // "string"
console.log(typeof true); // "boolean"
console.log(typeof null); // "object"ï¼Œè¿™æ˜¯ä¸€ä¸ªECMAScript 3.0 çš„è®¾è®¡ç¼ºé™·ï¼ŒECMA-262 è§„å®š null çš„ç±»å‹æ˜¯ objectï¼Œå› ä¸ºç‰¹æ®Šå€¼ null è¢«è®¤ä¸ºæ˜¯å¯¹ç©ºå¯¹è±¡çš„å¼•ç”¨
console.log(typeof undefined); // "undefined"
console.log(typeof Symbol()); // "symbol"
console.log(typeof BigInt(123)); // "bigint"

// å¼•ç”¨æ•°æ®ç±»å‹
console.log(typeof {}); // "object"
console.log(typeof []); // "object"
console.log(typeof function () {}); // "function"ï¼Œå‡½æ•°æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å‡½æ•°æœ‰è‡ªå·±çš„ç‰¹æ®Šå±æ€§ï¼Œå¦‚ lengthã€name ç­‰ï¼Œæ‰€ä»¥ typeof è¿”å› "function"æ¥åŒºåˆ†å‡½æ•°å’Œå…¶ä»–å¯¹è±¡
```

### 1.8.1 undefined

- `undefined` è¡¨ç¤ºå˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼ï¼Œæˆ–è€…æœªå£°æ˜çš„å˜é‡ã€‚
- `undefined` ä¸º ECMA-262 ç¬¬ä¸‰ç‰ˆä¸­å®šä¹‰çš„åŸå§‹æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œæ˜¯ä¸ºäº†æ­£å¼æ˜ç¡®ç©ºå¯¹è±¡æŒ‡é’ˆï¼ˆnullï¼‰å’Œæœªåˆå§‹åŒ–å˜é‡ï¼ˆundefinedï¼‰çš„åŒºåˆ«ã€‚

### 1.8.2 Boolean

- `Boolean` è¡¨ç¤ºé€»è¾‘å€¼ï¼Œåªæœ‰ä¸¤ä¸ªå€¼ï¼š`true` å’Œ `false`ã€‚

### 1.8.3 Number

- `Number` è¡¨ç¤ºæ•°å­—ç±»å‹ï¼Œä½¿ç”¨ IEEE 754 æ ¼å¼ï¼Œæ¥è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹å€¼ï¼ˆä¹Ÿå«åŒç²¾åº¦å€¼ï¼‰ã€‚
- `Number` çš„å–å€¼èŒƒå›´ï¼š
  - æœ€å°å€¼ï¼š`Number.MIN_VALUE`ï¼Œçº¦ä¸º 5e-324
  - æœ€å¤§å€¼ï¼š`Number.MAX_VALUE`ï¼Œçº¦ä¸º 1.7976931348623157e308
  - è¶…å‡ºèŒƒå›´ï¼š`Number.POSITIVE_INFINITY`ï¼Œ`Number.NEGATIVE_INFINITY`
- `Number` æ•´æ•°å¯ä»¥ç”¨äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå‰ç¼€åˆ†åˆ«ä¸º `0b`ã€`0o`ã€`0x`ã€‚
- `Number` çš„ç‰¹æ®Šå€¼ï¼š`NaN`ï¼Œè¡¨ç¤ºéæ•°å­—ï¼Œä»–ä¸ç­‰äºä»»ä½•å€¼ï¼ŒåŒ…æ‹¬ä»–è‡ªå·±çš„ `NaN`ã€‚

#### 1.8.3.1 æ•°å€¼è½¬æ¢

æœ‰ä¸‰ä¸ªå‡½æ•°å¯ä»¥å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºæ•°å­—ç±»å‹ï¼šåˆ†åˆ«æ˜¯ `Number`ã€`parseInt`ã€`parseFloat`ã€‚å…¶ä¸­ `Number` å¯ç”¨äºä»»ä½•æ•°æ®ç±»å‹ï¼Œè€Œ `parseInt` å’Œ `parseFloat` åªèƒ½ç”¨äºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ã€‚

- `Number`ï¼šå°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºæ•°å­—ç±»å‹ã€‚
- `parseInt`ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ï¼Œæ¥å—ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¿›åˆ¶ï¼Œå¦‚ `parseInt("123", 2)`ä»£è¡¨äºŒè¿›åˆ¶ã€‚
- `parseFloat`ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼Œå› ä¸ºåªè§£æåè¿›åˆ¶ï¼Œæ‰€ä»¥ä¸æ¥å—ç¬¬äºŒä¸ªå‚æ•°ã€‚

```javascript
// Number
console.log(Number("123")); // 123
console.log(Number("123.45")); // 123.45
console.log(Number("123.45px")); // NaN

// parseInt
console.log(parseInt("123")); // 123
console.log(parseInt("123.45")); // 123
console.log(parseInt("123.45px")); // 123
console.log(parseInt("123", 2)); // ä»£è¡¨æŒ‰äºŒè¿›åˆ¶è§£æ
console.log(parseInt("123", 8)); // ä»£è¡¨æŒ‰å…«è¿›åˆ¶è§£æ
console.log(parseInt("123", 10)); // ä»£è¡¨æŒ‰åè¿›åˆ¶è§£æ
console.log(parseInt("123", 16)); // ä»£è¡¨æŒ‰åå…­è¿›åˆ¶è§£æ

// parseFloat
console.log(parseFloat("123")); // 123
console.log(parseFloat("123.45")); // 123.45
console.log(parseFloat("123.45px")); // 123.45
```

### 1.8.4 BigInt

- `BigInt` è¡¨ç¤ºå¤§æ•´æ•°ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºè¶…å‡º `Number.MAX_SAFE_INTEGER` å–å€¼èŒƒå›´çš„æ•´æ•°ã€‚
- ä¸å†ä½¿ç”¨ IEEE 754 æ ‡å‡†ï¼Œè€Œæ˜¯ä½¿ç”¨åŸç”Ÿçš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•ã€‚
- `BigInt` çš„åˆ›å»ºæ–¹å¼ï¼šåœ¨æ•°å­—åé¢åŠ  `n`ï¼Œæˆ–è€…ä½¿ç”¨ `BigInt` æ„é€ å‡½æ•°ã€‚

```javascript
// åˆ›å»º BigInt
console.log(123n); // 123n
console.log(BigInt(123)); // 123n

// è¶…å‡º Number.MAX_SAFE_INTEGER çš„æ•´æ•°
console.log(Number.MAX_SAFE_INTEGER); // 9007199254740991
console.log(BigInt(Number.MAX_SAFE_INTEGER) + 1n); // 9007199254740992n
```

#### 1.8.4.1 BigInt çš„è¿ç®—

- BigInt å‡ ä¹æ”¯æŒæ‰€æœ‰ Number ä½¿ç”¨çš„ç®—æ•°ã€ä¸€å…ƒå’Œä½æ“ä½œç¬¦ï¼Œä½†ä¸æ”¯æŒä¸€å…ƒåŠ å· `+`è¿ç®—ç¬¦ã€æ— ç¬¦å·å³ç§» `>>>`ã€‚
- BigInt ä¸æ”¯æŒæ··åˆè¿ç®—ï¼Œå³ä¸èƒ½å°† BigInt å’Œ Number è¿›è¡Œæ··åˆè¿ç®—ã€‚
- é™¤æ³•è¿ç®— `/` ä¼šæˆªæ–­å°æ•°éƒ¨åˆ†ï¼ˆå‘é›¶å–æ•´ï¼‰ï¼Œå› ä¸º BigInt ä¸èƒ½è¡¨ç¤ºå°æ•°ã€‚
- å­—ç¬¦ä¸²ä¸ BigInt ç›¸åŠ ï¼šä¼šè¿”å›å­—ç¬¦ä¸²ç»“æœï¼Œå¦‚ `"123" + 123n` ä¼šè¿”å› `"123123"`ã€‚
- å¸ƒå°”è¿”å›çš„è¿ç®—ç¬¦ï¼ˆå¦‚æ¯”è¾ƒè¿ç®—ç¬¦å’Œç›¸ç­‰è¿ç®—ç¬¦ï¼‰å…è®¸æ··åˆ Number å’Œ BigInt ä½œä¸ºæ“ä½œæ•°

```javascript
let a = 10n ** 2n; // 100n
let b = 100n / 3n; // 33n
let c = 16n | 8n; // 24n
let d = -8n + -8n; // -16n
console.log(4n > 3); // true
```

#### 1.8.4.2 é™æ€æ–¹æ³•

BigInt æœ‰ä¸¤ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºæ¨¡æ‹Ÿå›ºå®šä½å®½æ•´æ•°çš„è¡Œä¸ºï¼ˆå¦‚ 8 ä½ã€16 ä½ã€32 ä½æ•´æ•°ï¼‰ï¼š

- `BigInt.asUintN(ä½æ•°, BigIntå€¼)`ï¼šå°† BigInt æˆªæ–­ä¸ºæŒ‡å®šä½æ•°çš„æ— ç¬¦å·æ•´æ•°ï¼Œç”¨äºæ¨¡æ‹Ÿ uint8ã€uint16 ç­‰ç±»å‹ã€‚
- `BigInt.asIntN(ä½æ•°, BigIntå€¼)`ï¼šå°† BigInt æˆªæ–­ä¸ºæŒ‡å®šä½æ•°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œç”¨äºæ¨¡æ‹Ÿ int8ã€int16 ç­‰ç±»å‹ã€‚

è¿™äº›æ–¹æ³•åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€äº¤äº’æˆ–å®ç°ç‰¹å®šç®—æ³•ï¼ˆå¦‚åŠ å¯†ç®—æ³•ï¼‰æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥ç¡®ä¿æ•°å€¼ä¸ä¼šè¶…å‡ºé¢„æœŸçš„èŒƒå›´ã€‚

```javascript
// å°†00011000æˆªçŸ­ä¸º1000
BigInt.asIntN(4, 24n); // -8n
BigInt.asUintN(4, 24n); // 8n

// å°†11111111æˆªçŸ­ä¸º1111
BigInt.asIntN(4, -1n); // -1n
BigInt.asUintN(4, -1n); // 15n

// å°†00010000æˆªçŸ­ä¸º10000
BigInt.asIntN(5, 16n); // -16n
BigInt.asUintN(5, 16n); // 16n

// å°†00010000æˆªçŸ­ä¸º010000
BigInt.asIntN(6, 16n); // 16n
BigInt.asUintN(6, 16n); // 16n
```

#### 1.8.4.3 JSON

BigInt ä¸èƒ½ç›´æ¥è¢« JSON.stringify() è½¬æ¢ï¼Œéœ€è¦è‡ªå®šä¹‰è½¬æ¢å‡½æ•° replacer ä½œä¸ºå‚æ•°ï¼Œå†é€šè¿‡ reviver å‚æ•°ç”¨ JSON.parse()è½¬æ¢ä¸º BigIntï¼š

```javascript
// è½¬æ¢ä¸ºå­—ç¬¦ä¸²
let data = {
  bigNumber: 123n,
};

//å½“å°è¯•ç›´æ¥ä½¿ç”¨ JSON.stringify() åºåˆ—åŒ–åŒ…å« BigInt å€¼çš„å¯¹è±¡æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯
JSON.stringify(data); // TypeError: BigInt value can't be serialized in JSON
// ä½¿ç”¨ replacer å’Œ reviverå¯ä»¥è§£å†³è¯¥é—®é¢˜
// JSON.stringify() æ–¹æ³•æ¥å—ä¸€ä¸ªå¯é€‰çš„ replacer å‚æ•°ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ•°ç»„ï¼Œç”¨äºåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­è½¬æ¢å€¼
//è‡ªå®šä¹‰è½¬æ¢å‡½æ•°
const replacer = (key, value) => {
  return typeof value === "bigint" ? value.toString() : value;
};
JSON.stringify(data, replacer); // `{"bigNumber":"123"}`

// è½¬æ¢ä¸ºBigInt
const reviver = (key, value) => {
  return key === "bigNumber" ? BigInt(value) : value;
};
JSON.parse(`{"bigNumber":"123"}`, reviver); // { bigNumber: 123n }

// ä¸Šé¢çš„æ–¹æ³•åªé€‚ç”¨äºå·²çŸ¥é”®åçš„æƒ…å†µã€‚å¦‚æœä½ ä¸çŸ¥é“å“ªäº›å€¼æ˜¯ BigIntï¼Œæˆ–è€…æœ‰åµŒå¥—çš„å¯¹è±¡ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨æ›´é€šç”¨çš„æ–¹æ³•ï¼š
// æ›´é€šç”¨çš„ replacer
const replacer = (key, value) => {
  return typeof value === "bigint" ? { type: "bigint", value: value.toString() } : value;
};

// æ›´é€šç”¨çš„ reviver
const reviver = (key, value) => {
  if (value && typeof value === "object" && value.type === "bigint") {
    return BigInt(value.value);
  }
  return value;
};
```

### 1.8.5 String

- `String` å­—ç¬¦ä¸²ç±»å‹è¡¨ç¤ºé›¶æˆ–å¤šä¸ª 16 ä½ Unicode å­—ç¬¦åºåˆ—
- ä½¿ç”¨åŒå¼•å· `""`ã€å•å¼•å· `''`ã€åå¼•å· `` ` ``
- å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸å¯æ”¹å˜ï¼Œéœ€è¦å…ˆé”€æ¯å†åˆ›å»º
- å­—ç¬¦ä¸²å­—é¢é‡ï¼šString ç±»å‹åŒ…å«ä¸€äº›å­—ç¬¦ä¸²å­—é¢é‡ï¼Œç”¨äºè¡¨ç¤ºéæ‰“å°å­—ç¬¦æˆ–å…¶ä»–ç”¨é€”

  | å­—é¢é‡     | å«ä¹‰                                                                                                        |
  | ---------- | ----------------------------------------------------------------------------------------------------------- |
  | \n         | æ¢è¡Œ                                                                                                        |
  | \t         | åˆ¶è¡¨ç¬¦                                                                                                      |
  | \r         | å›è½¦                                                                                                        |
  | \f         | æ¢é¡µ                                                                                                        |
  | \b         | é€€æ ¼                                                                                                        |
  | \\         | åæ–œæ                                                                                                       |
  | \'         | å•å¼•å·                                                                                                      |
  | \"         | åŒå¼•å·                                                                                                      |
  | \`         | åå¼•å·                                                                                                      |
  | \xhh       | è¡¨ç¤ºä¸€ä¸ªç”±ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—(hh)æŒ‡å®šçš„ Unicode å­—ç¬¦ï¼ŒèŒƒå›´æ˜¯ 0x00 åˆ° 0xFF (0-255)ï¼Œä¾‹å¦‚ï¼š"\xA9" è¡¨ç¤ºç‰ˆæƒç¬¦å· Â© |
  | \uhhhh     | è¡¨ç¤ºä¸€ä¸ªç”±å››ä½åå…­è¿›åˆ¶æ•°å­—(hhhh)æŒ‡å®šçš„ UTF-16 ç¼–ç å•å…ƒï¼Œä¾‹å¦‚ï¼š"\u00A9" è¡¨ç¤ºç‰ˆæƒç¬¦å· Â©                       |
  | \u{xxxxxx} | è¡¨ç¤ºä¸€ä¸ªç”± 1-6 ä½åå…­è¿›åˆ¶æ•°å­—æŒ‡å®šçš„ Unicode ä»£ç ç‚¹ï¼ŒES6 æ–°å¢                                                |

```javascript
// ç¤ºä¾‹
console.log("\xA9"); // Â© (ç‰ˆæƒç¬¦å·)
console.log("\u00A9"); // Â© (ç‰ˆæƒç¬¦å·)
console.log("\u{1F600}"); // ğŸ˜€ (ç¬‘è„¸è¡¨æƒ…)
```

#### 1.8.5.1 è½¬æ¢å­—ç¬¦ä¸²

- æœ‰ä¸¤ç§æ–¹å¼å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š`String` æ„é€ å‡½æ•°å’Œ `String` å¯¹è±¡çš„ `toString` æ–¹æ³•

```javascript
// ä½¿ç”¨ String æ„é€ å‡½æ•°
console.log(String(123)); // "123"
console.log(String(true)); // "true"
console.log(String(null)); // "null"
console.log(String(undefined)); // "undefined"
console.log(String({})); // "[object Object]"

// ä½¿ç”¨ toString() æ–¹æ³• null å’Œundefined æ²¡æœ‰ toString() æ–¹æ³•
console.log(123.toString()); // "123"
console.log(true.toString()); // "true"
console.log({}.toString()); // "[object Object]"
/*
toString() ä¸€èˆ¬ä¸æ¥æ”¶å‚æ•°ï¼Œåœ¨å¯¹æ•°å€¼è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œ
toString()å¯ä»¥æ¥å—ä¸€ä¸ªåº•æ•°å‚æ•°ï¼Œå¦‚2,8,10,16,å¯
å¾—åˆ°äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶æ•°
*/
let num = 10;
console.log(num.toString()); // "10"(é»˜è®¤åè¿›åˆ¶)
console.log(num.toString(2)); // "1010"(äºŒè¿›åˆ¶)
console.log(num.toString(8)); // "12"(å…«è¿›åˆ¶)
console.log(num.toString(10)); // "10"(åè¿›åˆ¶)
console.log(num.toString(16)); // "a"(åå…­è¿›åˆ¶)
```

#### 1.8.5.2 æ¨¡æ¿å­—é¢é‡

- æ¨¡æ¿å­—é¢é‡ä½¿ç”¨åå¼•å· \` \`
- å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡ï¼Œä½¿ç”¨ `${}` è¯­æ³•
- å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­æ¢è¡Œ
- æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•°ï¼ˆtag functionï¼‰ï¼šå¯ä»¥è‡ªå®šä¹‰å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²

```javascript
// æ’å…¥å˜é‡
console.log(`Hello, ${name}!`);

// æ¢è¡Œ
console.log(`Hello,
World!`);

// æ ‡ç­¾å‡½æ•°
function tag(strings, ...values) {
  return strings.reduce((acc, str, i) => {
    return acc + str + (values[i] ?? "");
  }, "");
}

const name = "john";
const age = 30;
console.log(tag`hello, ${name}! you are ${age} years old.`);
// æ ‡ç­¾å‡½æ•°è¯¦è§£
// æ ‡ç­¾å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œç”¨äºè‡ªå®šä¹‰å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²
// å½“æˆ‘ä»¬ä½¿ç”¨ tag`template` è¯­æ³•æ—¶ï¼ŒJavaScript ä¼šï¼š
// 1. å°†æ¨¡æ¿å­—ç¬¦ä¸²åˆ†å‰²æˆæ™®é€šå­—ç¬¦ä¸²éƒ¨åˆ†å’Œæ’å€¼è¡¨è¾¾å¼éƒ¨åˆ†
// 2. è°ƒç”¨æ ‡ç­¾å‡½æ•°ï¼Œä¼ å…¥è¿™äº›éƒ¨åˆ†ä½œä¸ºå‚æ•°

function explainTag(strings, ...values) {
  console.log("å­—ç¬¦ä¸²éƒ¨åˆ†:", strings);
  // è¾“å‡º: ["hello, ", "! you are ", " years old."]

  console.log("æ’å€¼è¡¨è¾¾å¼çš„å€¼:", values);
  // è¾“å‡º: ["john", 30]

  // æ‰‹åŠ¨ç»„åˆå­—ç¬¦ä¸²å’Œå€¼
  let result = "";
  for (let i = 0; i < strings.length; i++) {
    result += strings[i];
    // æ·»åŠ å€¼ï¼ˆå¦‚æœæœ‰ï¼‰
    if (i < values.length) {
      result += values[i];
    }
  }
  return result;
}

const name = "John";
const age = 30;
// è°ƒç”¨æ ‡ç­¾å‡½æ•°
const message = explainTag`hello, ${name}! you are ${age} years old.`;
console.log(message); // "hello, John! you are 30 years old."

// å®ç”¨ç¤ºä¾‹ï¼šè‡ªåŠ¨è½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦
function safeHTML(strings, ...values) {
  // è½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦çš„å‡½æ•°
  const escapeHTML = (str) => {
    return String(str).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;");
  };

  // è½¬ä¹‰æ‰€æœ‰æ’å€¼
  const escapedValues = values.map((value) => escapeHTML(value));

  // ç»„åˆå­—ç¬¦ä¸²å’Œè½¬ä¹‰åçš„å€¼
  let result = strings[0];
  for (let i = 0; i < escapedValues.length; i++) {
    result += escapedValues[i] + strings[i + 1];
  }

  return result;
}

// ä½¿ç”¨ç¤ºä¾‹
const userInput = '<script>alert("XSSæ”»å‡»")</script>';
const safeOutput = safeHTML`<div>${userInput}</div>`;
console.log(safeOutput);
// è¾“å‡º: "<div>&lt;script&gt;alert(&quot;XSSæ”»å‡»&quot;)&lt;/script&gt;</div>"
// è¿™æ ·å¯ä»¥å®‰å…¨åœ°åœ¨HTMLä¸­æ˜¾ç¤ºç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢XSSæ”»å‡»

//å½“æœ‰nä¸ªæ’å€¼æ—¶
let a = 1,
  b = 2;
const resultTag = (strings, ...values) => {
  return strings[0] + values.map((v, i) => `${v}${strings[i + 1]}`).join("");
};

console.log(resultTag`${a} + ${b} = ${a + b}`);
```

#### 1.8.5.3 åŸå§‹å­—ç¬¦ä¸²

- åŸå§‹å­—ç¬¦ä¸²ï¼ˆraw stringï¼‰ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å­—ç¬¦ä¸²è¡¨ç¤ºæ–¹å¼ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä¿ç•™æ‰€æœ‰å­—ç¬¦çš„åŸå§‹å½¢å¼ï¼Œä¸å¤„ç†è½¬ä¹‰åºåˆ—ã€‚åœ¨ JavaScript ä¸­ï¼Œé€šè¿‡ String.raw æ ‡ç­¾å‡½æ•°æ¥åˆ›å»ºåŸå§‹å­—ç¬¦ä¸²ã€‚
  - åŸå§‹å­—ç¬¦ä¸²çš„å·¥ä½œåŸç†
    - å½“ä½¿ç”¨ String.raw æ—¶ï¼š
      - æ‰€æœ‰çš„è½¬ä¹‰åºåˆ—ï¼ˆå¦‚\nã€\tã€\u000A ç­‰ï¼‰éƒ½ä¸ä¼šè¢«è§£æä¸ºç‰¹æ®Šå­—ç¬¦
      - æ¯ä¸ªåæ–œæ \éƒ½ä¼šè¢«ä¿ç•™ä¸ºå­—é¢é‡å­—ç¬¦
      - ä½†æ’å€¼è¡¨è¾¾å¼ä»ç„¶ä¼šè¢«æ­£å¸¸å¤„ç†å’Œæ›¿æ¢

```javascript
// æ™®é€šå­—ç¬¦ä¸²ä¸­ï¼Œ\n ä¼šè¢«è§£æä¸ºæ¢è¡Œç¬¦
console.log("Hello\nWorld");
// è¾“å‡º:
// Hello
// World

// ä½¿ç”¨ String.rawï¼Œ\n ä¸ä¼šè¢«è§£æï¼Œè€Œæ˜¯ä¿ç•™ä¸ºåŸå§‹çš„ä¸¤ä¸ªå­—ç¬¦ \ å’Œ n
console.log(String.raw`Hello\nWorld`);
// è¾“å‡º: Hello\nWorld

// æ™®é€šå­—ç¬¦ä¸²ä¸­ï¼Œ\u00A9 ä¼šè¢«è§£æä¸ºç‰ˆæƒç¬¦å· Â©
console.log("Copyright \u00A9");
// è¾“å‡º: Copyright Â©

// ä½¿ç”¨ String.rawï¼Œ\u00A9 ä¸ä¼šè¢«è§£æï¼Œè€Œæ˜¯ä¿ç•™ä¸ºåŸå§‹çš„6ä¸ªå­—ç¬¦
console.log(String.raw`Copyright \u00A9`);
// è¾“å‡º: Copyright \u00A9

// æ’å€¼è¡¨è¾¾å¼ä»ç„¶ä¼šè¢«å¤„ç†
const name = "JavaScript";
console.log(String.raw`Hello ${name}!`);
// è¾“å‡º: Hello JavaScript!
```

**å®é™…åº”ç”¨åœºæ™¯**

- æ­£åˆ™è¡¨è¾¾å¼ï¼šåˆ›å»ºåŒ…å«å¤§é‡åæ–œæ çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ç‰¹åˆ«æœ‰ç”¨

```javascript
// ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸éœ€è¦åŒé‡è½¬ä¹‰
const regex = new RegExp(String.raw`https://example\.com/\d+`);

// ä¸ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²æ—¶éœ€è¦åŒé‡è½¬ä¹‰
const regex2 = new RegExp("https://example\\.com/\\d+");
```

- æ–‡ä»¶è·¯å¾„ï¼šåœ¨å¤„ç† Windows æ–‡ä»¶è·¯å¾„æ—¶ï¼ˆåŒ…å«å¤§é‡åæ–œæ ï¼‰

```javascript
// ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²è¡¨ç¤º Windows æ–‡ä»¶è·¯å¾„
const path = String.raw`C:\Users\Username\Documents\file.txt`;

// ä¸ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²æ—¶éœ€è¦åŒé‡è½¬ä¹‰
const path2 = "C:\\Users\\Username\\Documents\\file.txt";
```

- æ¨¡æ¿ç”Ÿæˆï¼šç”ŸæˆåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ä»£ç æˆ–æ ‡è®°æ—¶ JavaScript çš„ String.raw ç±»ä¼¼äºï¼š
  - Python ä¸­çš„ r å‰ç¼€ï¼ˆå¦‚ r"Hello\nWorld"ï¼‰
  - C#ä¸­çš„@å‰ç¼€ï¼ˆå¦‚@"Hello\nWorld"ï¼‰

### 1.8.6 Symbolç±»å‹
